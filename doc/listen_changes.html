<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Couchbeam - Listen DB changes</title>
    <!--[if IE]>

    <script>
        // allow IE to recognize HTMl5 elements
        document.createElement('section');
        document.createElement('article');
        document.createElement('aside');
        document.createElement('footer');
        document.createElement('header');
        document.createElement('nav');
        document.createElement('time');

    </script>
    <![endif]-->
    <link rel="stylesheet" href="css/couchbeam.css?20091017" type="text/css" media="screen, projection" />
</head>
<body>
  <div id="container">
    
  <header id="mainhead">
    <h1><a href="index.html">Couchbeam 0.4.3</a></h1>
    <p id="download">get the source in <a href="http://github.com/benoitc/couchbeam">git</a> or <a href="http://bitbucket.org/benoitc/couchbeam">hg</a>, then <a href="http://github.com/benoitc/couchbeam/issues">send feedback</a></p>
    
  </header>
  
  <section id="content">
    <h1>Listen Db Changes</h1>

    <p>Since version 0.3 it's now possible to listen continuously the changes on your db. This is provided by the functions <code>couchbeam_db:subscribe/2</code> or <code>couchbeam_db:subscribe/3</code>.</p>

    <p>Usage of this function is very simple, you provide a pid to the function and each time the db will be updated an event is sent to this pid. Events are :</p>
    <ul>
      <li>{body_pid, Pid} -> the pid of the incoming body. You  could use it directly if you need</li>
      <li>body_done -> end of send</li>
      <li>{body_done, Body} -> same as above but with an optionnal body</li>
      <li>{change, Change} -> the decoded change line in erlang object</li>
      <li>{error, Reason}</li>
      <li>{'EXIT', Reason}</li>
    </ul>
    
    <p>more details about options :</p>

    <script src="http://friendpaste.com/3oMKD4IaQI4tgwaCKrCWgb.js"></script>

    <h2>Quick example :</h2>

    <script src="http://friendpaste.com/1hMpaHkhV86ulH5CqcisJq.js"></script>
  </section>
  
  <footer>
    <p>2009-2010 &copy; <a href="http://benoitc.im">Beno√Æt Chesneau</a> - Some rights resenved</p>
  </footer>
  </div>
</body>